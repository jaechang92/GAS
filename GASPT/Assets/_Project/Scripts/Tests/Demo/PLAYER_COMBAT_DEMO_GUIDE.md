# 🎮 Player Combat Demo Guide

플레이어 전투 시스템을 테스트할 수 있는 데모 씬 가이드입니다.

---

## 🚀 빠른 시작

### 방법 1: 빈 씬에서 시작

1. **새 씬 생성**
   ```
   File > New Scene
   ```

2. **빈 GameObject 생성**
   ```
   Hierarchy > 우클릭 > Create Empty
   이름: "PlayerCombatDemo"
   ```

3. **스크립트 추가**
   - `PlayerCombatDemo` 컴포넌트 추가
   - Play 모드 진입

4. **자동 설정**
   - 플레이어 자동 생성
   - 적 3개 자동 생성
   - 콤보 시스템 자동 설정

---

## 🎮 조작 방법

### 플레이어 조작

| 키 | 동작 |
|---|---|
| **WASD** | 이동 |
| **Space** | 점프 |
| **LShift** | 대시 |
| **마우스 좌클릭** | 공격 (콤보) |

### 테스트 기능

| 키 | 동작 |
|---|---|
| **T** | 플레이어 체력 회복 (+50) |
| **Y** | 적 재생성 |
| **U** | 콤보 리셋 |
| **I** | 통계 초기화 |
| **R** | 씬 리셋 |
| **H** | 도움말 출력 |

---

## ⚔️ 콤보 시스템

### 기본 콤보 (3단)

**콤보 진행 방식:**
1. 공격 버튼 클릭 → 1단 공격
2. 0.5초 내 재클릭 → 2단 공격
3. 0.5초 내 재클릭 → 3단 공격 (완료)

**콤보별 특성:**
- **1단**: 기본 데미지 (1.0x), 범위 1.5x1.0
- **2단**: 데미지 1.2x, 범위 1.8x1.0
- **3단**: 데미지 1.4x, 범위 2.1x1.0, 강한 넉백

**콤보 리셋 조건:**
- 1초간 공격 안 함
- U 키 누름
- 플레이어 피격/사망

---

## 📊 UI 설명

### 좌측 상단 패널

**플레이어 정보:**
- Player HP: 현재/최대 체력
- 체력 바 (초록색)

**콤보 정보:**
- Combo: 현재 인덱스 / 전체 콤보 수
- Combo Active: 콤보 활성화 여부

**통계:**
- 총 타격: 적을 타격한 횟수
- 총 처치: 적을 처치한 횟수
- 총 피해: 가한 총 데미지

**버튼:**
- 체력 회복, 적 재생성, 씬 리셋

### 우측 상단 패널

**Event Log:**
- 최근 15개 이벤트 표시
- 콤보, 데미지, 사망 등 기록

---

## 🔧 커스터마이징

### Inspector 설정

**PlayerCombatDemo 컴포넌트:**

```
Player 설정:
- Player Prefab: (선택사항) 플레이어 프리팹
- Player Spawn Position: (0, 0, 0)

Enemy 설정:
- Enemy Prefab: (선택사항) 적 프리팹
- Enemy Spawn Positions: 적 생성 위치 배열

Combo 설정:
- Setup Default Combo: true (자동 콤보 설정)
- Combo Count: 3 (콤보 단계 수)

UI 설정:
- Show UI: true (UI 표시)
```

### 콤보 데이터 수정

코드에서 `SetupPlayerCombo()` 함수 수정:

```csharp
var comboData = new ComboData
{
    comboName = "Custom Combo",
    comboIndex = 0,
    damageMultiplier = 2f,        // 데미지 배율
    animationSpeed = 1.5f,         // 애니메이션 속도
    hitboxSize = new Vector2(2f, 1.5f),  // 히트박스 크기
    knockbackForce = new Vector2(10f, 3f), // 넉백 강도
    inputWindowEnd = 0.7f          // 입력 가능 시간
};
```

---

## 🧪 테스트 시나리오

### 시나리오 1: 기본 전투 테스트

1. **Play 모드 진입**
2. **WASD로 적에게 접근**
3. **마우스 좌클릭으로 공격**
4. **Enemy HP 감소 확인**
5. **Event Log에서 데미지 확인**

✅ **예상 결과**: 적이 데미지를 받고 체력 감소

### 시나리오 2: 콤보 테스트

1. **적에게 접근**
2. **공격 버튼 클릭** (1단)
3. **0.5초 내 재클릭** (2단)
4. **0.5초 내 재클릭** (3단)
5. **Event Log에서 "콤보 진행" 메시지 확인**

✅ **예상 결과**:
- 콤보 1→2→3 진행
- 데미지 점진적 증가
- 3단에서 강한 넉백

### 시나리오 3: 콤보 리셋 테스트

1. **1단 공격 실행**
2. **1초 대기** (자동 리셋)
3. **다시 공격** → 1단부터 시작 확인

또는

1. **1단 공격 실행**
2. **U 키 누름** (수동 리셋)
3. **다시 공격** → 1단부터 시작 확인

✅ **예상 결과**: 콤보가 리셋되고 1단부터 재시작

### 시나리오 4: 다중 적 처치

1. **적 3명 모두 공격**
2. **연속 콤보로 처치**
3. **통계 확인**
   - 총 타격 횟수
   - 총 처치 수
   - 총 피해량

✅ **예상 결과**: 통계가 정확하게 기록됨

### 시나리오 5: 플레이어 체력 관리

1. **적에게 가까이 접근** (적 AI가 있다면 피격)
2. **T 키로 체력 회복**
3. **체력 바 변화 확인**

✅ **예상 결과**: 체력 회복 및 UI 업데이트

---

## 🔍 디버깅

### 문제: 플레이어가 생성되지 않음

**해결:**
- Console 창에서 에러 확인
- PlayerCombatDemo 컴포넌트가 GameObject에 있는지 확인
- Inspector에서 "Setup Player Combat Demo" Context Menu 실행

### 문제: 공격이 작동하지 않음

**해결:**
- InputHandler가 활성화되어 있는지 확인
- PlayerController의 Combat 컴포넌트 확인
- Console에서 "공격 상태 진입" 로그 확인

### 문제: 콤보가 진행되지 않음

**해결:**
- ComboSystem이 설정되어 있는지 확인
- Combo Count > 0인지 확인
- 콤보 윈도우 시간 내에 재공격하는지 확인

### 문제: 적이 데미지를 받지 않음

**해결:**
- 적에게 HealthSystem이 있는지 확인
- Collider2D가 Trigger 설정되어 있는지 확인
- DamageSystem이 씬에 있는지 확인

---

## 📝 체크리스트

### 필수 구성 요소

- [ ] PlayerCombatDemo GameObject
- [ ] PlayerCombatDemo 스크립트
- [ ] DamageSystem (자동 생성)
- [ ] 플레이어 (자동 생성)
- [ ] 적 3개 (자동 생성)
- [ ] 콤보 설정 (자동)

### 테스트 항목

- [ ] 플레이어 이동 작동
- [ ] 공격 입력 반응
- [ ] 콤보 시스템 작동
- [ ] 데미지 적용 확인
- [ ] 체력 시스템 작동
- [ ] UI 정상 표시
- [ ] Event Log 기록

---

## 🎯 다음 단계

이 데모를 완료한 후:

1. ✅ **적 AI 추가**: 적이 플레이어를 공격하도록
2. ✅ **추가 어빌리티**: 특수 스킬, 마법 등
3. ✅ **레벨 디자인**: 실제 스테이지 구성
4. ✅ **비주얼 개선**: 애니메이션, 이펙트 추가

---

## 📚 관련 문서

- **COMBAT_DEMO_GUIDE.md**: Combat 시스템 기본 데모
- **SKULL_SYSTEM_TEST_GUIDE.md**: 스컬 시스템 테스트
- **GASPT_DEVELOPMENT_ROADMAP.md**: 전체 개발 로드맵

---

**작성일**: 2025-10-02
**작성자**: GASPT 개발팀
